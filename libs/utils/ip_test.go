package utils

import (
	"github.com/ihaiker/vik8s/install/tools"
	"net"
	"testing"
)

func TestParseIP(t *testing.T) {
	ips := ParseIP([]string{"10.24.0.1-10.24.1.1:23"}, 0)
	for _, ip := range ips {
		t.Log(ip)
	}
}

func TestAddressRange(t *testing.T) {
	ip, ipnet, err := net.ParseCIDR("172.16.100.0/16")
	t.Log(ip)
	t.Log(ipnet)
	t.Log(err)

	min, max := AddressRange(ipnet)
	t.Log(min)
	t.Log(max)
}

func TestBase64File(t *testing.T) {
	etcdCaBase64 := "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUN3akNDQWFxZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFTTVJBd0RnWURWUVFERXdkbGRHTmsKTFdOaE1CNFhEVEl3TURVeE5UQXlNRFl5TWxvWERUTXdNRFV4TXpBeU1EWXlNbG93RWpFUU1BNEdBMVVFQXhNSApaWFJqWkMxallUQ0NBU0l3RFFZSktvWklodmNOQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQUw4eUZoZHdRdlJXCnJyN3p6NVgzVTcySzcvaE1LV1B0LytuNnE2c0paZ2I4RHhtdkN5WUZWQkJnbUk3L0IxVkZXL1kyNDFoU1lyc1gKYzBoeXV2NU5TSTJxQkx6TG80b1hJblRRY2UzTVcyUXZydVcyTHhOOXdXMy9qWmEvY2ZTa05xSklxc0lsWGRlaApZbmpGLzE2OTlsZXg2aHZFTm9vd3JsM1M4VDlBUDZaWFlUZkpySkN6SnlFdnZ2NEVFWnJjbmI0USt2bWJWRWNVCjFvM0hMeUtqTGdJaVJDMnBEaW9qYmo2ZXg2UzNXQ2VvTWFyZjIvWkxkZnNaUXhJcXdEbG5pWWZEUHJ4MWNEVVUKZWlsVURXdXR6VFpMK0NTZTdjMzF6SkFTUEd5NE4vTnB3RkZBUHBzbmRkM1NPZ2wxOXRaMWx6MlA2MG52Mzd5VAp3ZUxMOVNsejNLVUNBd0VBQWFNak1DRXdEZ1lEVlIwUEFRSC9CQVFEQWdLa01BOEdBMVVkRXdFQi93UUZNQU1CCkFmOHdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBQVNTT2U1L1plVVhORG9OTThUT1pWSTdJVFdBQWNsUjRBUmMKa2hReEJqWHltbGpEcDFzRWdVRjJsTkc2ekliTG9nMnk2SWw3aDZNRlhDTGxKeDVkMXF6UlQxR2Y3dldnSDl6bQpTQTkyMEV5TCtHQ0VXUnVZdUtQWkRFNFFaMXhORkRsNlVHUStGeVhRbHcrWVpDQ1lGaWhXK0VDUWVFWi96emhNCjhnTnp1UHZjaDdpQVk2OVpPeGVGaTVtZWVXUEY1YmNDaUFicWw2YzJuTWh0VWhLdWtZL3d1UVhnOWwrancwVTkKVTFSa25qdzF4Y1dkTGZNOXFOVmFNNnlaNWlIa28xOXZBa3ZzVTRLUU0xbUNMYWExRXMzc1VjTVh1TTFqb2U1eQo4YXMvWGllb29RcWZrVFdZek9TUVVQV01MdXFhTFQ5UmdEbUVFdm9lVzZvcHQ1NzhFTjA9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K"
	etcdCaBase64b := Base64File(tools.Join("/pki/etcd/ca.crt"))
	if etcdCaBase64 != etcdCaBase64b {
		t.Fatal("not equal")
	}
}
